[package]
name = "{{ crate_name }}"
description = "{{ description }}"
version = "0.1.0"
edition = "2024"

[lib]
crate-type = ["cdylib"]

[features]
{%- if features contains "wgpu" %}
default = ["gpu_wgpu"]
{%- else %}
default = []
{%- endif %}
catch-panics = []
{%- if features contains "wgpu" %}
gpu_wgpu = ["dep:wgpu", "dep:pollster", "dep:futures-intrusive", "dep:bytemuck"]
{%- endif %}

[dependencies]
after-effects = { workspace = true }
utils = { path = "../../crates/utils" }
{% if features contains "imageproc" -%}
imageproc = { workspace = true }
{%- endif %}
{%- if features contains "rustfft" -%}
rustfft = { workspace = true }
num-complex = { workspace = true }
{%- endif %}
{%- if features contains "nalgebra" -%}
nalgebra = { workspace = true }
{%- endif %}
{%- if features contains "rand" %}
rand = { workspace = true }
{%- endif %}
{%- if features contains "wgpu" %}
wgpu = { workspace = true, optional = true }
bytemuck = { workspace = true, optional = true }
pollster = { workspace = true, optional = true }
futures-intrusive = { workspace = true, optional = true }
{%- endif %}

[dev-dependencies]
pipl = { workspace = true }

[build-dependencies]
chrono.workspace = true
pipl.workspace = true

[lints]
workspace = true
